<script>
jQuery(document).ready(function($) {
  $(".group_elements").fancybox({
    'transitionIn'  : 'elastic',
    'transitionOut' : 'elastic',
    'speedIn'       : 600,
    'speedOut'      : 200,
    'cyclic'        : true,
    'titlePosition' : 'over',
    'titleFormat'   : function(title, currentArray, currentIndex, currentOpts) {
      return '<span id="fancybox-title-over">Image ' +  (currentIndex + 1) + ' / ' + currentArray.length + ' ' + title + '</span>';},
    'onComplete'    : function() {
      $("#fancybox-wrap").hover(function() {
        $("#fancybox-title-over").show();
        }, function() {
          $("#fancybox-title-over").hide();
        });
    }
  });
});
</script>


<div id="gallery">
  <% counter = 0 %>
  <div class="gallery_row">
  <% @images.each do |image| %>
    <% if counter == 4 %>
      </div>
      <div class="gallery_row">
      <% counter=0 %>
    <% end %>
    <div class="gallery_entry">
      <img class="thumb" src="<%= image.multi_purpose_image.url(:small) %>"/>
      <a class="zoom-icon group_elements" title="<%= image.description %>" href="<%= image.multi_purpose_image.url %>" rel="<%= @album.name %>"><%= t("gallery.show.zoom") %></a>
    </div>
    <% counter+=1 %>
  <% end %>
  <% if counter <= 4 %>
    </div>
  <% end %>
</div>

<div id="buttons">
  <%= link_to t('gallery.show.back'), albums_path, { :class => "button negative" } %>
</div>
