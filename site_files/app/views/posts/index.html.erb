<% content_for(:page_title) do %>
  <%= posts_title(@tags) %>
<% end -%>

<% content_for :head do %>
  <%= auto_discovery_link_tag(:atom, @tags.nil? ? posts_path(:format => 'atom') : posts_path(:tags => @tags, :format => 'atom')) %>
<% end %>

<div id="sidebar">

  <div id="tag-cloud">
    <h2><%= I18n::t('posts.tags.title') %></h2>
    <% tag_cloud @tags_for_cloud, ['nube1', 'nube2', 'nube3', 'nube4', 'nube5', 'nube6'] do |name, css_class| %>
      <% classes = (@tags && (@tags.include? name)) ? (css_class + ' selected') : css_class %>
      <%= link_to name, posts_path(:tags => @tags, :this_tag => name), :class => classes %>
    <% end %>
  </div>

  <div id="archives">
    <p><%= link_to(I18n::t('posts.archive'), archives_path) %></p>
  </div>
</div>

<div id="content">
  
  <div id="posts">
    <% if @posts.empty? -%>
      <p><%= I18n::t('posts.none') %></p>
    <% else -%>
      <% @posts.each do |post| -%>
        <div class="post post-<%= post.id %>">
          <%= render :partial => 'post', :locals => {:post => post} %>
        </div>
      <% end -%>
    <% end -%>
    <%= will_paginate(@posts, :previous_label => I18n::t('posts.pagination.previous'),
                              :next_label     => I18n::t('posts.pagination.next')) %>
  </div>

</div>

