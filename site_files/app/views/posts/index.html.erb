<% content_for(:page_title) do %>
  <%= posts_title(@tags) %>
<% end -%>

<% content_for :head do %>
  <%= auto_discovery_link_tag(:atom, @tags.nil? ? posts_path(:format => 'atom') : posts_path(:tags => @tags, :format => 'atom')) %>
<% end %>

<div id="sidebar">

  <div id="tag-cloud">
    <h3>Tag Cloud</h3>
    <% tag_cloud @tags_for_cloud, ['nube1', 'nube2', 'nube3', 'nube4', 'nube5', 'nube6'] do |name, css_class| %>
      <% classes = (@tags && (@tags.include? name)) ? (css_class + ' selected') : css_class %>
      <%= link_to name, posts_path(:tags => @tags, :this_tag => name), :class => classes %>
    <% end %>
  </div>

</div>

<div id="content">
  
  <div id="posts">
    <% if @posts.empty? -%>
    	<p>There are no posts yet.</p>
    <% else -%>
    	<% @posts.each do |post| -%>
    	<div class="post post-<%= post.id %>">
    	  <%= render :partial => 'post', :locals => {:post => post} %>
    	</div>
    	<% end -%>
      <% if more_content? -%>
        <div class="related">Looking for more? Head on over to the <%= link_to("archives", archives_path) %>.</div>
      <% end -%>
    <% end -%>
  </div>

</div>

