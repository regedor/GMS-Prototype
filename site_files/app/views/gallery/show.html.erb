<style>
.gallery_entry { background:url("/images/item-bottom-shadow-new.png") no-repeat scroll left bottom transparent; float:left; margin:0 0px 33px 33px; padding-bottom:5px; position:relative; width: 198px; height: 148px; }
        .item_image { position:relative; top:0; height: 148px; width: 198px;}
            .item_image img.thumb {  border:3px solid #E5E5E5; }
            .item_image span.overlay { background:url("/images/item-overlay-new.png") no-repeat; width: 192px; height: 142px; left:3px; position:absolute; top:3px; }
            .item_image a.zoom-icon, .item_image a.more-icon { display:block; height:61px; position:absolute; text-indent:-9999px; top:41px; width:61px; visibility: hidden; }
            .item_image a.zoom-icon { background:url("/images/zoom-icon.png") no-repeat; left:21px; }
            .item_image a.more-icon { background:url("/images/readmore-icon.png") no-repeat; left:116px; }

.gallery_entry:first-child { margin-left:24.5px; clear:left;}
#gallery{margin-top:15px;}
#buttons .back {display:block; margin-bottom:20px;}
</style>

<script>
jQuery(document).ready(function($) {

   var $portfolioItem = $('.gallery_entry');
    $portfolioItem.find('.item_image').css('background-color','#000000');
    $('.zoom-icon, .more-icon').css({'opacity':'0','visibility':'visible'});

    $portfolioItem.hover(function(){
        $(this).find('.item_image').stop(true, true).animate({top: -15}, 500).find('img.thumb').stop(true, true).animate({opacity: 0.7},500);
        $(this).find('.zoom-icon').stop(true, true).animate({opacity: 1, left: 33},400);
        $(this).find('.more-icon').stop(true, true).animate({opacity: 1, left: 104},400);
    }, function(){
        $(this).find('.zoom-icon').stop(true, true).animate({opacity: 0, left: 21},400);
        $(this).find('.more-icon').stop(true, true).animate({opacity: 0, left: 116},400);
        $(this).find('.item_image').stop(true, true).animate({top: 0}, 500).find('img.thumb').stop(true, true).animate({opacity: 1},500);
    });
 

    $(".group_elements").fancybox({ 
	        'transitionIn'	:	'elastic',
			'transitionOut'	:	'elastic',
			'speedIn'		:	600, 
			'speedOut'		:	200,
			'cyclic'        :   true,
			'titlePosition'	:	'over',
			'titleFormat'   :   function(title, currentArray, currentIndex, currentOpts) {
			     return '<span id="fancybox-title-over">Image ' +  (currentIndex + 1) + ' / ' + currentArray.length + ' ' + title + '</span>';},
			'onComplete'	:	function() {
					$("#fancybox-wrap").hover(function() {
					    $("#fancybox-title-over").show();
					}, function() {
						$("#fancybox-title-over").hide();
					});
				}
	    });
	
});	
</script>

<div id="buttons">
  <%= link_to t('gallery.show.back'), gallery_index_path, { :class => "button negative back" } %>
</div>

<div id="gallery">
  <% counter = 0 %>
  <div class="gallery_row">
  <% @images.each do |image| %>
  <% if counter == 4 %>
    </div>
    <div class="gallery_row">
    <% counter=0 %>	
  <% end %>
  <div class="gallery_entry">	
    <div class="item_image">	
      <img class="thumb" src="/assets/images/thumbs/<%= @album.name %>/<%= image.path %>"/>
      <span class="overlay"></span>
      <a class="zoom-icon group_elements" title="<%= image.description %>" href="/assets/images/<%= @album.name %>/<%= image.path %>" rel="<%= @album.name %>"><%= t("gallery.show.zoom") %></a>
      <a class="more-icon" href="#"><%= t("gallery.show.read_more") %></a>	
    </div>
  </div>
  <% counter+=1 %>
  <% end %>
  <% if counter < 4 %>
    </div>
  <% end %>
</div>	