<%= include_i18n_calendar_javascript %>
<script>
jQuery.noConflict();
  
jQuery(document).ready(function($){
 
  var counter = 0;
  var locale = ""
	for(i in $.datepicker.regional){
		if(counter == 1)
		{ locale=i; break; }
		counter++;
	}
  $.datepicker.setDefaults( $.datepicker.regional[ '' ] );	
  $( ".datepicker" ).datepicker($.datepicker.regional[locale]);
});
</script>

<% content_for(:head) do -%>
  <%= javascript_include_tag 'edit_preview' %>
<% end -%>

<% form.input_field_set do -%>
  <%= form.input :title,
                 :label    => I18n::t('admin.posts.columns.title') %>
  <%= form.input :body,
                 :label    => I18n::t('admin.posts.columns.body'),
                 :input_html => { :class    => "textile" },
                 :hint     => I18n::t('admin.posts.form.hints.body').html_safe %>
  <%= form.input :tag_list,
                 :as       => 'string',
                 :required => false,
                 :label    => I18n::t('admin.posts.columns.tag_list'),
                 :hint     => I18n::t('admin.posts.form.hints.tag_list') %>
  <% if @record.image.content_type %>
    <span class="file_icon"><%= image_tag @record.image.url(:image) %></span>
  <% end %>
  <%= form.input :image,
                 :required => false,
				 :as => :file,
                 :hint     => I18n::t('admin.posts.form.hints.image'),
                 :label    => I18n::t('admin.posts.columns.image') %>
  <% if @record.generic.content_type %>
    <span class="file_icon"><%= image_tag file_icon_displayer(@record.generic) %></span>
  <% end %>
  <%= form.input :generic,
                 :required => false,
				 :as => :file,
                 :hint     => I18n::t('admin.posts.form.hints.generic_file'),
                 :label    => I18n::t('admin.posts.columns.generic_file') %>
  <%= form.input :published_at,
                 :as       => 'string',
                 :input_html => {:class => "datepicker", :value => l(@record.published_at || Time.now, :format => "%d/%m/%Y")},
                 :label    => I18n::t('admin.posts.columns.published_at'),
                 :hint     => I18n::t('admin.posts.form.hints.published_at').html_safe %>  
  <%= form.input :slug,
                 :required => false,
                 :label    => I18n::t('admin.posts.columns.slug'),
                 :hint     => I18n::t('admin.posts.form.hints.slug') %>
  <%= form.input(:minor_edit,
                 :as       => 'boolean',
                 :label    => I18n::t('admin.posts.columns.minor_edit'),
                 :hint     => I18n::t('admin.posts.form.hints.minor_edit')
                 ) unless @record.new_record? %>
<% end -%>
